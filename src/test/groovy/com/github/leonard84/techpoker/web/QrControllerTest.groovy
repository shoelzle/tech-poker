package com.github.leonard84.techpoker.web

import jakarta.inject.Inject

import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content

import com.github.leonard84.techpoker.config.SpringMobileConfiguration
import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest
import org.springframework.test.web.servlet.MockMvc

import spock.lang.Specification

@WebMvcTest([QrController, SpringMobileConfiguration])
class QrControllerTest extends Specification {
    @Inject
    MockMvc mockMvc

    def "creates qr code"() {
        given:
        def expected = '''\
<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 41 41" stroke="none">
<style type="text/css">
.black {fill:#000000;}
</style>
<path class="black"  d=" M4,4h1v1h-1z M5,4h1v1h-1z M6,4h1v1h-1z M7,4h1v1h-1z M8,4h1v1h-1z M9,4h1v1h-1z M10,4h1v1h-1z M14,4h1v1h-1z M22,4h1v1h-1z M23,4h1v1h-1z M26,4h1v1h-1z M27,4h1v1h-1z M30,4h1v1h-1z M31,4h1v1h-1z M32,4h1v1h-1z M33,4h1v1h-1z M34,4h1v1h-1z M35,4h1v1h-1z M36,4h1v1h-1z M4,5h1v1h-1z M10,5h1v1h-1z M12,5h1v1h-1z M13,5h1v1h-1z M14,5h1v1h-1z M17,5h1v1h-1z M20,5h1v1h-1z M24,5h1v1h-1z M26,5h1v1h-1z M30,5h1v1h-1z M36,5h1v1h-1z M4,6h1v1h-1z M6,6h1v1h-1z M7,6h1v1h-1z M8,6h1v1h-1z M10,6h1v1h-1z M12,6h1v1h-1z M17,6h1v1h-1z M18,6h1v1h-1z M19,6h1v1h-1z M20,6h1v1h-1z M22,6h1v1h-1z M23,6h1v1h-1z M25,6h1v1h-1z M30,6h1v1h-1z M32,6h1v1h-1z M33,6h1v1h-1z M34,6h1v1h-1z M36,6h1v1h-1z M4,7h1v1h-1z M6,7h1v1h-1z M7,7h1v1h-1z M8,7h1v1h-1z M10,7h1v1h-1z M13,7h1v1h-1z M16,7h1v1h-1z M17,7h1v1h-1z M19,7h1v1h-1z M20,7h1v1h-1z M21,7h1v1h-1z M22,7h1v1h-1z M23,7h1v1h-1z M24,7h1v1h-1z M26,7h1v1h-1z M27,7h1v1h-1z M28,7h1v1h-1z M30,7h1v1h-1z M32,7h1v1h-1z M33,7h1v1h-1z M34,7h1v1h-1z M36,7h1v1h-1z M4,8h1v1h-1z M6,8h1v1h-1z M7,8h1v1h-1z M8,8h1v1h-1z M10,8h1v1h-1z M12,8h1v1h-1z M13,8h1v1h-1z M14,8h1v1h-1z M16,8h1v1h-1z M17,8h1v1h-1z M20,8h1v1h-1z M23,8h1v1h-1z M26,8h1v1h-1z M28,8h1v1h-1z M30,8h1v1h-1z M32,8h1v1h-1z M33,8h1v1h-1z M34,8h1v1h-1z M36,8h1v1h-1z M4,9h1v1h-1z M10,9h1v1h-1z M12,9h1v1h-1z M14,9h1v1h-1z M16,9h1v1h-1z M19,9h1v1h-1z M20,9h1v1h-1z M21,9h1v1h-1z M23,9h1v1h-1z M26,9h1v1h-1z M27,9h1v1h-1z M30,9h1v1h-1z M36,9h1v1h-1z M4,10h1v1h-1z M5,10h1v1h-1z M6,10h1v1h-1z M7,10h1v1h-1z M8,10h1v1h-1z M9,10h1v1h-1z M10,10h1v1h-1z M12,10h1v1h-1z M14,10h1v1h-1z M16,10h1v1h-1z M18,10h1v1h-1z M20,10h1v1h-1z M22,10h1v1h-1z M24,10h1v1h-1z M26,10h1v1h-1z M28,10h1v1h-1z M30,10h1v1h-1z M31,10h1v1h-1z M32,10h1v1h-1z M33,10h1v1h-1z M34,10h1v1h-1z M35,10h1v1h-1z M36,10h1v1h-1z M12,11h1v1h-1z M14,11h1v1h-1z M15,11h1v1h-1z M20,11h1v1h-1z M21,11h1v1h-1z M22,11h1v1h-1z M23,11h1v1h-1z M25,11h1v1h-1z M26,11h1v1h-1z M28,11h1v1h-1z M4,12h1v1h-1z M5,12h1v1h-1z M7,12h1v1h-1z M10,12h1v1h-1z M11,12h1v1h-1z M15,12h1v1h-1z M16,12h1v1h-1z M17,12h1v1h-1z M21,12h1v1h-1z M22,12h1v1h-1z M24,12h1v1h-1z M25,12h1v1h-1z M27,12h1v1h-1z M30,12h1v1h-1z M31,12h1v1h-1z M32,12h1v1h-1z M34,12h1v1h-1z M35,12h1v1h-1z M4,13h1v1h-1z M9,13h1v1h-1z M11,13h1v1h-1z M13,13h1v1h-1z M15,13h1v1h-1z M16,13h1v1h-1z M17,13h1v1h-1z M19,13h1v1h-1z M20,13h1v1h-1z M21,13h1v1h-1z M23,13h1v1h-1z M25,13h1v1h-1z M26,13h1v1h-1z M28,13h1v1h-1z M30,13h1v1h-1z M32,13h1v1h-1z M35,13h1v1h-1z M7,14h1v1h-1z M8,14h1v1h-1z M9,14h1v1h-1z M10,14h1v1h-1z M11,14h1v1h-1z M15,14h1v1h-1z M16,14h1v1h-1z M18,14h1v1h-1z M21,14h1v1h-1z M25,14h1v1h-1z M26,14h1v1h-1z M27,14h1v1h-1z M28,14h1v1h-1z M30,14h1v1h-1z M32,14h1v1h-1z M33,14h1v1h-1z M36,14h1v1h-1z M4,15h1v1h-1z M5,15h1v1h-1z M6,15h1v1h-1z M12,15h1v1h-1z M13,15h1v1h-1z M14,15h1v1h-1z M15,15h1v1h-1z M16,15h1v1h-1z M20,15h1v1h-1z M24,15h1v1h-1z M25,15h1v1h-1z M27,15h1v1h-1z M28,15h1v1h-1z M5,16h1v1h-1z M6,16h1v1h-1z M8,16h1v1h-1z M9,16h1v1h-1z M10,16h1v1h-1z M12,16h1v1h-1z M14,16h1v1h-1z M15,16h1v1h-1z M16,16h1v1h-1z M18,16h1v1h-1z M21,16h1v1h-1z M22,16h1v1h-1z M26,16h1v1h-1z M28,16h1v1h-1z M30,16h1v1h-1z M32,16h1v1h-1z M34,16h1v1h-1z M35,16h1v1h-1z M36,16h1v1h-1z M6,17h1v1h-1z M9,17h1v1h-1z M11,17h1v1h-1z M15,17h1v1h-1z M18,17h1v1h-1z M19,17h1v1h-1z M20,17h1v1h-1z M21,17h1v1h-1z M22,17h1v1h-1z M23,17h1v1h-1z M25,17h1v1h-1z M29,17h1v1h-1z M30,17h1v1h-1z M31,17h1v1h-1z M33,17h1v1h-1z M6,18h1v1h-1z M7,18h1v1h-1z M9,18h1v1h-1z M10,18h1v1h-1z M11,18h1v1h-1z M12,18h1v1h-1z M14,18h1v1h-1z M15,18h1v1h-1z M16,18h1v1h-1z M17,18h1v1h-1z M22,18h1v1h-1z M24,18h1v1h-1z M25,18h1v1h-1z M28,18h1v1h-1z M29,18h1v1h-1z M35,18h1v1h-1z M4,19h1v1h-1z M6,19h1v1h-1z M9,19h1v1h-1z M11,19h1v1h-1z M14,19h1v1h-1z M15,19h1v1h-1z M17,19h1v1h-1z M18,19h1v1h-1z M21,19h1v1h-1z M22,19h1v1h-1z M28,19h1v1h-1z M30,19h1v1h-1z M33,19h1v1h-1z M34,19h1v1h-1z M36,19h1v1h-1z M7,20h1v1h-1z M9,20h1v1h-1z M10,20h1v1h-1z M13,20h1v1h-1z M14,20h1v1h-1z M16,20h1v1h-1z M23,20h1v1h-1z M24,20h1v1h-1z M26,20h1v1h-1z M30,20h1v1h-1z M36,20h1v1h-1z M4,21h1v1h-1z M7,21h1v1h-1z M8,21h1v1h-1z M11,21h1v1h-1z M15,21h1v1h-1z M16,21h1v1h-1z M17,21h1v1h-1z M18,21h1v1h-1z M22,21h1v1h-1z M24,21h1v1h-1z M25,21h1v1h-1z M26,21h1v1h-1z M27,21h1v1h-1z M28,21h1v1h-1z M29,21h1v1h-1z M30,21h1v1h-1z M32,21h1v1h-1z M35,21h1v1h-1z M36,21h1v1h-1z M4,22h1v1h-1z M6,22h1v1h-1z M9,22h1v1h-1z M10,22h1v1h-1z M11,22h1v1h-1z M12,22h1v1h-1z M13,22h1v1h-1z M17,22h1v1h-1z M18,22h1v1h-1z M20,22h1v1h-1z M21,22h1v1h-1z M22,22h1v1h-1z M25,22h1v1h-1z M27,22h1v1h-1z M28,22h1v1h-1z M30,22h1v1h-1z M4,23h1v1h-1z M6,23h1v1h-1z M7,23h1v1h-1z M11,23h1v1h-1z M17,23h1v1h-1z M18,23h1v1h-1z M21,23h1v1h-1z M22,23h1v1h-1z M23,23h1v1h-1z M25,23h1v1h-1z M26,23h1v1h-1z M29,23h1v1h-1z M30,23h1v1h-1z M32,23h1v1h-1z M34,23h1v1h-1z M36,23h1v1h-1z M4,24h1v1h-1z M5,24h1v1h-1z M7,24h1v1h-1z M9,24h1v1h-1z M10,24h1v1h-1z M11,24h1v1h-1z M14,24h1v1h-1z M15,24h1v1h-1z M22,24h1v1h-1z M24,24h1v1h-1z M27,24h1v1h-1z M28,24h1v1h-1z M30,24h1v1h-1z M31,24h1v1h-1z M32,24h1v1h-1z M35,24h1v1h-1z M6,25h1v1h-1z M12,25h1v1h-1z M13,25h1v1h-1z M15,25h1v1h-1z M17,25h1v1h-1z M19,25h1v1h-1z M20,25h1v1h-1z M21,25h1v1h-1z M22,25h1v1h-1z M23,25h1v1h-1z M25,25h1v1h-1z M26,25h1v1h-1z M27,25h1v1h-1z M29,25h1v1h-1z M30,25h1v1h-1z M31,25h1v1h-1z M33,25h1v1h-1z M35,25h1v1h-1z M36,25h1v1h-1z M4,26h1v1h-1z M5,26h1v1h-1z M6,26h1v1h-1z M9,26h1v1h-1z M10,26h1v1h-1z M11,26h1v1h-1z M13,26h1v1h-1z M15,26h1v1h-1z M18,26h1v1h-1z M19,26h1v1h-1z M21,26h1v1h-1z M22,26h1v1h-1z M23,26h1v1h-1z M26,26h1v1h-1z M29,26h1v1h-1z M30,26h1v1h-1z M32,26h1v1h-1z M36,26h1v1h-1z M5,27h1v1h-1z M6,27h1v1h-1z M9,27h1v1h-1z M12,27h1v1h-1z M14,27h1v1h-1z M15,27h1v1h-1z M17,27h1v1h-1z M21,27h1v1h-1z M24,27h1v1h-1z M27,27h1v1h-1z M33,27h1v1h-1z M34,27h1v1h-1z M35,27h1v1h-1z M36,27h1v1h-1z M4,28h1v1h-1z M8,28h1v1h-1z M10,28h1v1h-1z M11,28h1v1h-1z M12,28h1v1h-1z M13,28h1v1h-1z M18,28h1v1h-1z M20,28h1v1h-1z M26,28h1v1h-1z M28,28h1v1h-1z M29,28h1v1h-1z M30,28h1v1h-1z M31,28h1v1h-1z M32,28h1v1h-1z M33,28h1v1h-1z M35,28h1v1h-1z M36,28h1v1h-1z M12,29h1v1h-1z M18,29h1v1h-1z M20,29h1v1h-1z M21,29h1v1h-1z M22,29h1v1h-1z M25,29h1v1h-1z M27,29h1v1h-1z M28,29h1v1h-1z M32,29h1v1h-1z M4,30h1v1h-1z M5,30h1v1h-1z M6,30h1v1h-1z M7,30h1v1h-1z M8,30h1v1h-1z M9,30h1v1h-1z M10,30h1v1h-1z M12,30h1v1h-1z M14,30h1v1h-1z M15,30h1v1h-1z M17,30h1v1h-1z M18,30h1v1h-1z M22,30h1v1h-1z M25,30h1v1h-1z M27,30h1v1h-1z M28,30h1v1h-1z M30,30h1v1h-1z M32,30h1v1h-1z M33,30h1v1h-1z M35,30h1v1h-1z M4,31h1v1h-1z M10,31h1v1h-1z M14,31h1v1h-1z M17,31h1v1h-1z M21,31h1v1h-1z M22,31h1v1h-1z M24,31h1v1h-1z M25,31h1v1h-1z M27,31h1v1h-1z M28,31h1v1h-1z M32,31h1v1h-1z M34,31h1v1h-1z M35,31h1v1h-1z M36,31h1v1h-1z M4,32h1v1h-1z M6,32h1v1h-1z M7,32h1v1h-1z M8,32h1v1h-1z M10,32h1v1h-1z M13,32h1v1h-1z M16,32h1v1h-1z M18,32h1v1h-1z M20,32h1v1h-1z M23,32h1v1h-1z M24,32h1v1h-1z M26,32h1v1h-1z M27,32h1v1h-1z M28,32h1v1h-1z M29,32h1v1h-1z M30,32h1v1h-1z M31,32h1v1h-1z M32,32h1v1h-1z M34,32h1v1h-1z M35,32h1v1h-1z M4,33h1v1h-1z M6,33h1v1h-1z M7,33h1v1h-1z M8,33h1v1h-1z M10,33h1v1h-1z M12,33h1v1h-1z M13,33h1v1h-1z M15,33h1v1h-1z M17,33h1v1h-1z M18,33h1v1h-1z M19,33h1v1h-1z M20,33h1v1h-1z M24,33h1v1h-1z M25,33h1v1h-1z M27,33h1v1h-1z M28,33h1v1h-1z M29,33h1v1h-1z M32,33h1v1h-1z M33,33h1v1h-1z M36,33h1v1h-1z M4,34h1v1h-1z M6,34h1v1h-1z M7,34h1v1h-1z M8,34h1v1h-1z M10,34h1v1h-1z M16,34h1v1h-1z M17,34h1v1h-1z M18,34h1v1h-1z M21,34h1v1h-1z M22,34h1v1h-1z M25,34h1v1h-1z M26,34h1v1h-1z M28,34h1v1h-1z M30,34h1v1h-1z M32,34h1v1h-1z M36,34h1v1h-1z M4,35h1v1h-1z M10,35h1v1h-1z M12,35h1v1h-1z M13,35h1v1h-1z M14,35h1v1h-1z M16,35h1v1h-1z M17,35h1v1h-1z M18,35h1v1h-1z M20,35h1v1h-1z M21,35h1v1h-1z M22,35h1v1h-1z M23,35h1v1h-1z M27,35h1v1h-1z M31,35h1v1h-1z M34,35h1v1h-1z M35,35h1v1h-1z M36,35h1v1h-1z M4,36h1v1h-1z M5,36h1v1h-1z M6,36h1v1h-1z M7,36h1v1h-1z M8,36h1v1h-1z M9,36h1v1h-1z M10,36h1v1h-1z M12,36h1v1h-1z M15,36h1v1h-1z M16,36h1v1h-1z M20,36h1v1h-1z M21,36h1v1h-1z M24,36h1v1h-1z M27,36h1v1h-1z M28,36h1v1h-1z M29,36h1v1h-1z M30,36h1v1h-1z M31,36h1v1h-1z M32,36h1v1h-1z M35,36h1v1h-1z"/>
</svg>
'''

        expect:
        mockMvc.perform(get('/qr/2a123956-0c53-4452-b1e5-9b9681b8b396/join.svg'))
                .andExpect(content().string(expected))
                .andExpect(content().contentType("image/svg+xml;charset=UTF-8"))
    }
}
